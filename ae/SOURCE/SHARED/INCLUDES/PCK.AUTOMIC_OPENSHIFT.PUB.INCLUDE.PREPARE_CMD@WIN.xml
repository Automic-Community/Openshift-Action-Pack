<?xml version="1.0" encoding="ISO-8859-15" standalone="no"?><uc-export clientvers="11.0.0">
<JOBI name="PCK.AUTOMIC_OPENSHIFT.PUB.INCLUDE.PREPARE_CMD@WIN">
<HEADER state="1">
<Title/>
<ArchiveKey1/>
<ArchiveKey2/>
<OH_SubType/>
</HEADER>
<SCRIPT mode="1" state="1">
<MSCRI><![CDATA[: SET &COUNT# = 0
: SET &LOGIN_TYPE# = "USERNAME_PASSWORD"

:IF &UC4RB_OPENSHIFT_USERNAME# NE ""
:  IF &UC4RB_OPENSHIFT_PASSWORD# NE "" OR "--10"
:    SET &COUNT# = &COUNT# + 1
:  ENDIF
:ENDIF

:IF &UC4RB_OPENSHIFT_TOKEN# NE "" OR "--10"
: SET &COUNT# = &COUNT# + 1
: SET &LOGIN_TYPE# = "TOKEN"
:ENDIF

:IF &UC4RB_OPENSHIFT_CERTS# NE ""
: SET &COUNT# = &COUNT# + 1
: SET &LOGIN_TYPE# = "CERTIFICATE"
:ENDIF

:IF &COUNT# NE 1
:  STOP MSG, 50, "Please provide either of these (Username/password or Token or Certificate)"
:ENDIF



! Create temporary config file
:INC PCK.AUTOMIC_OPENSHIFT.PUB.INCLUDE.CREATE_CONFIG_FILE

: SET &UC4RB_ESCAPED_STRING# =&UC4RB_OPENSHIFT_CONFIGFILE#
: INC PCK.AUTOMIC_OPENSHIFT.PUB.INCLUDE.ESCAPE_ARG_VALUE@WIN

: SET &UC4RB_OPENSHIFT_CMD# = "oc --config &UC4RB_ESCAPED_STRING# "
: SET &UC4RB_OPENSHIFT_LOGOUT_CMD# = "oc --config &UC4RB_ESCAPED_STRING# logout"

! Add server url
: SET &UC4RB_ESCAPED_STRING# =&UC4RB_OPENSHIFT_SERVER#
: INC PCK.AUTOMIC_OPENSHIFT.PUB.INCLUDE.ESCAPE_ARG_VALUE@WIN
: SET &UC4RB_OPENSHIFT_LOGIN_CMD# = STR_CAT(&UC4RB_OPENSHIFT_CMD#," login &UC4RB_ESCAPED_STRING#")


: SWITCH "&LOGIN_TYPE#"
:   CASE "USERNAME_PASSWORD"
:     SET &UC4RB_ESCAPED_STRING# =&UC4RB_OPENSHIFT_USERNAME#
:     INC PCK.AUTOMIC_OPENSHIFT.PUB.INCLUDE.ESCAPE_ARG_VALUE@WIN
:     SET &UC4RB_OPENSHIFT_LOGIN_CMD# = STR_CAT(&UC4RB_OPENSHIFT_LOGIN_CMD#, " --username=&UC4RB_ESCAPED_STRING#")
!     Decrypt and add password
:     INC PCK.ITPA_SHARED.PUB.INCLUDE.ATTACH
:     SET &UC4RB_ENCRYPTED_PASSWORD_TMP# = "&UC4RB_OPENSHIFT_PASSWORD#"
:     INC PCK.ITPA_SHARED.PRV.INCLUDE.DECRYPT_PASSWORD
:     SET &UC4RB_OPENSHIFT_LOGIN_CMD# = STR_CAT(&UC4RB_OPENSHIFT_LOGIN_CMD#, " --password=%UC4_DECRYPTED_PWD%")

:   CASE "TOKEN"
!     Decrypt and add token
:     INC PCK.ITPA_SHARED.PUB.INCLUDE.ATTACH
:     SET &UC4RB_ENCRYPTED_PASSWORD_TMP# = "&UC4RB_OPENSHIFT_TOKEN#"
:     INC PCK.ITPA_SHARED.PRV.INCLUDE.DECRYPT_PASSWORD
:     SET &UC4RB_OPENSHIFT_LOGIN_CMD# = STR_CAT(&UC4RB_OPENSHIFT_LOGIN_CMD#, " --token=%UC4_DECRYPTED_PWD%")

:   CASE "CERTIFICATE"
:     SET &UC4RB_ESCAPED_STRING# =&UC4RB_OPENSHIFT_CERTS#
:     INC PCK.AUTOMIC_OPENSHIFT.PUB.INCLUDE.ESCAPE_ARG_VALUE@WIN
:     SET &UC4RB_OPENSHIFT_LOGIN_CMD# = STR_CAT(&UC4RB_OPENSHIFT_LOGIN_CMD#, " --certificate-authority=&UC4RB_ESCAPED_STRING#")
:     SET &UC4RB_OPENSHIFT_LOGIN_CMD# = STR_CAT(&UC4RB_OPENSHIFT_LOGIN_CMD#, " --insecure-skip-tls-verify=&UC4RB_SKIP_SSL#")

:   OTHER
:      STOP MSG, 50, "Please provide either of these (Username/password or Token or Certificate)"
: ENDSWITCH

: PRINT "Attempting login into openshift ,type :&LOGIN_TYPE#"
: PRINT &UC4RB_OPENSHIFT_LOGIN_CMD#
! Do Login
  &UC4RB_OPENSHIFT_LOGIN_CMD#

!Status messages
:SET &UC4RB_LOGGING_INFO# = "******** LOGIN SUCCESSFULLY ********"
:SET &UC4RB_LOGGING_ERROR# = "******** LOGIN FAILED ********"
: INC PCK.AUTOMIC_OPENSHIFT.PUB.INCLUDE.CHECK_JOBSTATUS@WIN]]></MSCRI>
</SCRIPT>
<DOCU_Docu state="1" type="text">
<DOC/>
</DOCU_Docu>
</JOBI>
</uc-export>